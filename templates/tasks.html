{% extends "tmplt_app.html" %}

{% block head %}

{% endblock head %}

{% set completed_values = [false] if request.args.get("notcomletedonly") == 'Yes' else [true, false] %}

{% block data %}
<div>

<table class="table table-responsive table-hover table-sm">
  <caption style="caption-side: top;">
    <h2 class="text-left-right">
      <span class="left-text">Tlist "{{ TLNAME | truncate(24, True) }}"</span>
      <span class="badge badge-secondary">{{ TLCOUNT }}</span>
      <span class="byline">
        <a href={{ url_for('tlists') }} class="toperation"><strong>UP</strong></a> ||
        <a href={{ url_for('task', tlist_id=TLID, task_id=None, mode='main') }} class="toperation"><strong>NEW</strong></a> ||
        <a href={{ url_for('tasksall') }}> <strong>AltView</strong></a>
      </span>
    </h2> 
  </caption>
  <thead>
    <tr>
       <th class="tpri">Pri</th>
       <th><span class="tname">Task name</span></th>
       <th class="tdate">Date_due</th>
       <th class="tchbox">
        {% if request.args.get("notcomletedonly") == 'Yes' %}
        <a href={{ url_for('tasks', tlist_id=TLID) }} class="toperation"><strong>F:all</strong> </a> 
        {% else %}
        <a href={{ url_for('tasks', tlist_id=TLID, notcomletedonly='Yes') }} class="toperation"><strong>F:~compl</strong></a> 
        {% endif %} 
        <br>Completed</th>
       <th class="tdate">_Date</th>
       <th>Operation</th>
    </tr>
  </thead>  
  <tbody>
{% for t in list_of_tasks if t.tcompleted in completed_values : %}
  <tr>
    <td class="tpri"><br>{{ t.tpri }}</td>
    <td>
      <span class="tname">{{ t.tname }}</span> 
      <br> <span class="tdesc">{{ t.tdesc | truncate(60, True) }}</span> 
    </td> 
    <td class="tdate">{{ t.tdtdue if t.tdtdue else "" }}</td>
    <td class="tchbox">
      {% if t.tcompleted %}
        <i class="bi bi-check-square"></i>
      {% else %}
        <i class="bi bi-square"></i>
      {% endif %}
    </td>
    <td class="tdate">{{ t.tdtcompleted if t.tdtcompleted else ""}}</td>
    <td class="toperation"><a href={{ url_for('task', tlist_id=TLID, task_id=t.tid, mode='main') }}><Strong>UPD</Strong></a> || <a href={{ url_for('task_delete', tlist_id=TLID, task_id=t.tid) }}><Strong>DEL</Strong></a>
    </td>
  </tr>
{% endfor %}
</tbody>
<tfoot>
<tr>
    <td>  </td> 
    <td>  </td>
    <td>  </td>   
    <td>  </td>
    <td>  </td>   
    <td>  </td>    
</tr>
</tfoot>
</table>
</div>
{% endblock data %}